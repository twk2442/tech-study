# CPU의 작동원리



**CPU내부 구성요소: ALU, 제어장치, 레지스터**





### ALU

- 계산하는 부품
- 레지스터로부터 피연산자를 받아들이고, 제어장치로부터 제어 신호를 받아들인다.
- 연산 결과와 플래그를 내보내 레지스터에 저장



### 제어장치

- 제어 신호를 내보내고, 명령어를 해석하는 부품
- 클럭, 해석할 명령어, 플래그 레지스터 속 플래그 값, 제어 버스로 전달된 제어 신호를 받아들인다.
- CPU 내부에 제어 신호 내보냄(ALU, 레지스터에 전달)
- CPU 외부에 제어 신호 내보냄(메모리, 입출력장치에 제어 버스로 전달)



### 레지스터

- 명령어와 데이터가 저장되는 곳
- 프로그램 카운터 : 메모리에서 가져올 명령어의 주소 저장
- 명령어 레지스터 : 메모리에서 읽어 들인 명령어 저장 
- 메모리 주소 레지스터 : 메모리 주소 저장
- 메모리 버퍼 레지스터 : 메모리와 주고받을 데이터 저장
- 플래그 레지스터 :  연산 결과나 CPU 상태에 대한 부가적인 정보를 저장
- 범용 레지스터 : 데이터와 주소 모두 저장
- 스택 포인터 : 스택 최상단의 위치 저장 
- 베이스 레지스터 : 기준 주소로서의 역할을 하는 주소를 저장  



#### 특정 레지스터를 이용한 주소 지정 방식

- 스택 주소 지정 방식 : 스택과 스택 포인터를 이용
- 변위 주소 지정 방식 
  - 상대주소 지정 방식 : 오퍼랜드와 프로그램 카운터의 값을 더해 유효 주소를 얻는 방식
  - 베이스 레지스터 주소 지정 방식 : 오퍼랜드와 베이스 레지스터의 값 더해 유효 주소 얻는 방식





### 명령어 사이클

CPU가 하나의 명령어를 처리하는 정형화된 흐름

인출 사이클, 실행 사이클, 간접 사이클, 인터럽트 사이클로 구성

- 인출 사이클: 메모리에 있는 명령어를 CPU로 가지고 오는 단계
- 실행 사이클: CPU로 가져온 명령어를 실행하는 단계
- 간접 사이클: 명령어 실행위해 메모리 접근을 한번 더 하는 단계 





### 인터럽트

CPU의 작업을 방해하는 신호

- 동기 인터럽트(예외) : CPU에 의해 발생
- 비동기 인터럽트(하드웨어 인터럽트) : 입출력장치에 의해 발생
  - 하드웨어 인터럽트 발생시 CPU는 수행하던 작업을 백업한 뒤 인터럽트 서비스 루틴 실행
  - 인터럽트 서비스 루틴 실행 끝나면 작업 복구해 다시 수행 재개



- 인터럽트 요청 신호: CPU의 작업을 방해하는 인터럽트에 대한 요청
- 인터럽트 플래그: 인터럽트 요청 신호를 받아들일지 결정하는 비트
- 인터럽트 벡터: 인터럽트 서비스 루틴의 식별 정보
- 인터럽트 서비스 루틴: 인터럽트를 처리하는 프로그램

